<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" >

  <Import Project="$(TestsRoot)test.SinglePackage.import"/>


  <Target Name="Assert">
    <unzip zipPath="$(expectedPackage)" extractPath="$(expectedPackageExtractedPath)" />
    <!--<Exec Command="explorer $(ProjectDir)$(expectedPackageExtractedPath)"/>-->

    <Error Text="> Assert: Expected file is not inside extracted package folder '$(expectedPackageExtractedPath)\content\additionalFile.txt' !"
           Condition="Exists('$(expectedPackageExtractedPath)\content\additionalFile.txt') == 'false'"/>
    <Error Text="> Assert: Expected file is not inside extracted package folder '$(expectedPackageExtractedPath)\content\recursive\recursiveContent.txt' !"
           Condition="Exists('$(expectedPackageExtractedPath)\content\recursive\recursiveContent.txt') == 'false'"/>
    <Error Text="> Assert: Expected file is not inside extracted package folder '$(expectedPackageExtractedPath)\outside\additionalFile.txt' !"
           Condition="Exists('$(expectedPackageExtractedPath)\outside\additionalFile.txt') == 'false'"/>

    <ItemGroup>
      <notExpectedFiles Include="project.proj"/>
      <notExpectedFiles Include="Properties/build.props"/>
    </ItemGroup>

    <Error Text="> Assert: Not expected file '%(notExpectedFiles.Identity)' is inside extracted package folder '$(expectedPackage)' !"
           Condition="Exists('$(expectedPackageExtractedPath)/%(notExpectedFiles.Filename)%(Extension)') == 'true'"/>
  </Target>

</Project>
